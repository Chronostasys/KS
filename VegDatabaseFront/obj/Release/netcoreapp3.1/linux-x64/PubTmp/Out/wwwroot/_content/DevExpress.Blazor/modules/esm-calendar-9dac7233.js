import"./esm-chunk-eaca7b99.js";import{EnsureElement as t,GetParentByClassName as e,PreventEventAndBubble as n}from"./esm-dom-utils-0302a1f6.js";import"./esm-chunk-5735fd9a.js";import{L as o,h as i,u as a}from"./esm-chunk-95f7350d.js";import{AttachEventsForFocusHiding as c}from"./esm-focus-utils-295d95eb.js";import{T as r}from"./esm-chunk-38c61c5f.js";function s(e,s,d){if(!(e=t(e)))return;function f(t,n){for(var o,i=(e.dayCells||(e.dayCells=e.querySelectorAll(".dxbs-day")),e.dayCells),a=0;o=i[a];a++){var c=o.getBoundingClientRect();if(c.top<=n&&n<c.bottom&&c.left<=t&&t<c.right)return o}}function h(t){if(!i("TouchStart")){var n=u(t.srcElement);n&&(e.inSelectionMode=!0,e.firstDate=l(n))}}function m(t){e.inSelectionMode&&(e.throttledDrag||(e.throttledDrag=r.Throttle((function(t){var n=f(t.clientX,t.clientY);if(n){var o=l(n);if(!o||!e.firstDate)return;e.lastDate?d.invokeMethodAsync("ChangeSelectionRange",o):(d.invokeMethodAsync("StartSelectionRange",e.firstDate,!t.ctrlKey),e.lastDate=o)}}),20)),e.throttledDrag(t))}function v(t){e.inSelectionMode&&e.lastDate&&d.invokeMethodAsync("EndSelectionRange",!1),e.firstDate=void 0,e.lastDate=void 0,e.inSelectionMode=!1}function g(t){a((function(){}),"TouchStart",300,!0)}function S(t){var n=u(t.srcElement);if(n){e.inSelectionMode=!0;var o=l(n);e.lastDate=o,d.invokeMethodAsync("StartSelectionRange",o,!1)}}function E(t){if(e.inSelectionMode){var o=f(t.touches[0].clientX,t.touches[0].clientY);if(o){var i=l(o);i&&e.lastDate-i!=0&&d.invokeMethodAsync("ChangeSelectionRange",i)}n(t)}}function y(t){e.inSelectionMode&&(d.invokeMethodAsync("EndSelectionRange",!0),n(t)),e.inSelectionMode=!1}e.dayCells=void 0,function(t){o.attachEventToElement(t,"touchstart",g),o.attachEventToElement(t,"touchmove",E),o.attachEventToElement(t,"touchend",y),o.attachLongTabEventToElement(t,S),o.attachEventToElement(t,"mousedown",h),o.attachEventToElement(t,"mousemove",m),o.attachEventToElement(t,"mouseup",v)}(e),c(e.querySelector(".card-header.btn-group"));let p=s.getBoundingClientRect();return s.style.width=p.width+"px",s.style.height=p.height+"px",Promise.resolve("ok")}function l(t){return new Date(parseInt(t.getAttribute("data-date")))}function u(t){return e(t,"dxbs-day")}function d(e){if(e=t(e))return DisposeEvents(e),Promise.resolve("ok")}const f={Init:s,Dispose:d};export default f;export{d as Dispose,s as Init};
