DxBlazorInternal.define("cjs-dragAndDropHelper-eb8a15e9.js",(function(t,e,o){t("./cjs-chunk-9eab2df8.js");var n=t("./cjs-dom-utils-b1fad850.js");t("./cjs-chunk-c4d681da.js");var r=t("./cjs-chunk-ac3aa63b.js"),i=function(t,e,o,r){this.itemForDrag=t,n.EnsureElement(this.itemForDrag),this.container=e,this.GetDropTarget=o,this.clean=!1,r&&(this.dragAnchor=this.itemForDrag.querySelector(r)),this.dragAnchor||(this.dragAnchor=this.itemForDrag);var i=this;this.container.size=function(){return m(i.container).size},this.itemForDrag.size=function(){return m(i.itemForDrag).size},this.itemForDrag.location=function(){return m(i.itemForDrag).location},this.Reset()},s={cursor:{configurable:!0},isScrollActive:{configurable:!0},scrollContainer:{configurable:!0}};i.prototype.dropEvents=function(){this.handlerDragStart&&this.itemForDrag&&n.DetachEventFromElement(this.dragAnchor,r.TouchUIHelper.touchMouseDownEventName,this.handlerDragStart),this.handlerDrag&&n.DetachEventFromElement(document,r.TouchUIHelper.touchMouseMoveEventName,this.handlerDrag),this.handlerDragEnd&&n.DetachEventFromElement(document,r.TouchUIHelper.touchMouseUpEventName,this.handlerDragEnd)},i.prototype.dropTempObject=function(){this.currentPoint=null,this.startPoint=null,this.cloneForMove&&(this.cloneForMove.parentNode.removeChild(this.cloneForMove),this.cloneForMove=null)},i.prototype.Reset=function(){if(!this.clean){this.clean=!0,this.dropTempObject(),this.dropEvents();var t=this;this.handlerDragStart=function(e){t.dragTriger(e)},n.AttachEventToElement(this.dragAnchor,r.TouchUIHelper.touchMouseDownEventName,this.handlerDragStart)}},i.prototype.Stop=function(){this.clean=!1,this.dropEvents()},i.prototype.Dispose=function(){this.dropTempObject(),this.dropEvents(),this.onDragStart=null,this.onDrag=null,this.onDrop=null,this.onDragEndAnimateEnd=null,this.onDragCancel=null,this.itemForDrag=null,this.container=null},s.cursor.get=function(){return this.cursorPoint},s.isScrollActive.get=function(){if(!this.scrollContainer.classList.contains("modal-body"))return!1;for(var t=this.scrollContainer.getBoundingClientRect(),e=0,o=this.scrollContainer.children,n=0;n<o.length;n++)e+=o[n].getBoundingClientRect().height;return e!==t.height},s.scrollContainer.get=function(){return this.container.parentNode},i.prototype.dragTriger=function(t){this.updateCursor(t);var e=this.cursor.clone(),o=this,i=function(n){return o.updateCursor(n),u(e,"-",o.cursor).scalarLength>3&&(s(),o.clean=!1,o.dragStart(t)),n.preventDefault(),!1},s=function(){n.DetachEventFromElement(document,r.TouchUIHelper.touchMouseMoveEventName,i),n.DetachEventFromElement(document,r.TouchUIHelper.touchMouseUpEventName,s)};return n.AttachEventToElement(document,r.TouchUIHelper.touchMouseMoveEventName,i),n.AttachEventToElement(document,r.TouchUIHelper.touchMouseUpEventName,s),t.preventDefault(),!1},i.prototype.dragStart=function(t){if(this.itemForDrag){var e,o;this.updateCursor(t),this.handlerDragStart&&n.DetachEventFromElement(this.dragAnchor,r.TouchUIHelper.touchMouseDownEventName,this.handlerDragStart),this.cloneForMove=((o=(e=this.itemForDrag).cloneNode(!0)).center=function(){return m(o).center},o.size=function(){return m(o).size},o.style.transition="none",o.style.width=e.offsetWidth+"px",o.style.visibility="invisible",o.classList.add("in-drag"),n.EraseBlazorIdentificators(o),o),this.itemForDrag.parentNode.insertBefore(this.cloneForMove,this.itemForDrag),this.onDragStart&&this.onDragStart(this.itemForDrag),this.scrollingCorrection={x:0,y:0},this.scrollingStart=this.scrollContainer.scrollTop;var i=this;this.handlerDrag=function(t){i.drag(t)},n.AttachEventToElement(document,r.TouchUIHelper.touchMouseMoveEventName,this.handlerDrag),this.handlerDragEnd=function(t){i.dragEnd(t)},n.AttachEventToElement(document,r.TouchUIHelper.touchMouseUpEventName,this.handlerDragEnd)}},i.prototype.drag=function(t){if(this.itemForDrag&&this.cloneForMove){if(this.updateCursor(t),this.scroll(),!this.startPoint)return this.startPoint=this.itemForDrag.location(),this.currentPoint=this.cursor.clone(),this.cloneForMove.style.visibility="visible",void 0;var e=this.container;this.isScrollActive&&(e=this.scrollContainer);var o=u(e,"-",this.cloneForMove.size()),n=this.cursor.LimitByRectangle(o);this.currentPoint=n,this.translateToPosition(this.cloneForMove,u(this.currentPoint,"-",this.startPoint,"+",this.scrollingCorrection),0),this.onDrag&&(t.centerOfDraggingObject=this.toRelativeCoord(this.cloneForMove.center()),this.onDrag(this.itemForDrag,t))}},i.prototype.dragEnd=function(t){if(this.itemForDrag&&this.cloneForMove&&this.startPoint){this.handlerDrag&&n.DetachEventFromElement(document,r.TouchUIHelper.touchMouseMoveEventName,this.handlerDrag),this.handlerDragEnd&&n.DetachEventFromElement(document,r.TouchUIHelper.touchMouseUpEventName,this.handlerDragEnd);var e=this.GetDropTarget(this.toRelativeCoord(this.cloneForMove.center())),o=this;if(e&&this.itemForDrag!==e.item){var i=u(this.toRealCoordinates(e.relativeRect),"+",this.scrollingCorrection,"+",{y:2});this.onDrop&&this.onDrop(this.itemForDrag,e.item);return this.animateItem(this.cloneForMove,u(i,"-",this.startPoint),(function(){o.cloneForMove&&(o.cloneForMove.style["box-shadow"]="none"),o.onDropAnimationEnd&&o.onDropAnimationEnd(o.itemForDrag,e.item)})),void 0}this.cloneForMove&&this.animateItem(this.cloneForMove,{x:0,y:0},(function(){o.onDragCancel(o.itemForDrag),o.Reset()}))}},i.prototype.scroll=function(){if(this.isScrollActive){var t,e=0,o=this.scrollContainer.getBoundingClientRect();this.cursor.y+this.cloneForMove.size().height-2>o.bottom?(e=this.cursor.y+this.cloneForMove.size().height-o.bottom+2,t={x:0,y:Math.min(this.scrollContainer.scrollTop+e,this.container.size().height-o.height)-this.scrollContainer.scrollTop}):this.cursor.y-2<o.top&&(e=this.cursor.y-o.top-2,t={x:0,y:Math.max(this.scrollContainer.scrollTop+e,0)-this.scrollContainer.scrollTop}),t&&(this.scrollContainer.scrollTop=this.scrollContainer.scrollTop+t.y,this.scrollingCorrection={y:this.scrollContainer.scrollTop-this.scrollingStart})}},i.prototype.updateCursor=function(t){this.cursorPoint=new h(this.getClientEventPos(t,"clientX"),this.getClientEventPos(t,"clientY")-this.itemForDrag.size().height/2)},i.prototype.translateToPosition=function(t,e,o){t.style.transition="all "+o+"s";var n=["translate(",Math.round(e.x),"px, ",Math.round(e.y),"px)"].join("");return n!==t.style.transform&&(t.style.transform=n,!0)},i.prototype.animateItem=function(t,e,o){var n=function(){t.removeEventListener("transitionend",n),o()};t.addEventListener("transitionend",n,!1);var r=this.translateToPosition(t,e,"0.2");return r||(t.removeEventListener("transitionend",n),o()),r},i.prototype.toRelativeCoord=function(t){return u(t,"-",this.container)},i.prototype.toRealCoordinates=function(t){return u(t,"+",this.container)},i.prototype.getClientEventPos=function(t,e){return void 0!==t[e]?t[e]:void 0!==t.touches&&t.touches[0]&&t.touches[0][e]?t.touches[0][e]:void 0!==t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0][e]?t.changedTouches[0][e]:0},Object.defineProperties(i.prototype,s);var h=function(t,e){this.x=t,this.y=e},a={length:{configurable:!0}};h.prototype.clone=function(){return new h(this.x,this.y)},a.length.get=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Equal=function(t){return this.x===t.x&&this.y===t.y},h.prototype.LimitByRectangle=function(t){var e=Math.min(Math.max(this.y,t.top),t.bottom),o=Math.min(Math.max(this.x,t.left),t.right);return new h(o,e)},h.prototype.IsInRect=function(t){return t.left<=this.x&&this.x<=t.right&&t.top<=this.y&&this.y<=t.bottom},Object.defineProperties(h.prototype,a);var c=function(t,e,o,n){this.x=t,this.y=e,this.width=o,this.height=n},l={left:{configurable:!0},top:{configurable:!0},bottom:{configurable:!0},right:{configurable:!0},size:{configurable:!0},location:{configurable:!0},center:{configurable:!0},scalarLength:{configurable:!0}};function u(){var t=Array.from(arguments),e=[],o=[];t.forEach((function(t){"-"===t||"+"===t?e.push(t):o.push(t)}));for(var n=[];o.length>0;)n.push(o.pop());for(;e.length>0;)n.push(e.shift());for(;n.length>0;){var r=n.shift();e.push("+"===r?g(e.pop(),e.pop()):"-"===r?p(e.pop(),e.pop()):r)}return e.pop()}function g(t,e){var o=d(t),n=d(e);return new c(o.x+n.x,o.y+n.y,o.width+n.width,o.height+n.height)}function p(t,e){var o=d(t),n=d(e);return new c(o.x-n.x,o.y-n.y,o.width-n.width,o.height-n.height)}function d(t){if(t.getBoundingClientRect)return m(t);var e=0,o=0,n=0,r=0;return t.x&&(e=t.x),t.y&&(o=t.y),t.width&&(n=t.width),t.height&&(r=t.height),{x:e,y:o,width:n,height:r}}function m(t){var e=t.getBoundingClientRect();return e&&e.left&&e.top&&!e.x&&!e.y&&(e.x=Math.min(e.left,e.right),e.y=Math.min(e.top,e.bottom)),new c(e.x,e.y,e.width,e.height)}c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},l.left.get=function(){return this.x},l.top.get=function(){return this.y},l.bottom.get=function(){return this.y+this.height},l.right.get=function(){return this.x+this.width},l.size.get=function(){return new c(0,0,this.width,this.height)},l.location.get=function(){return new c(this.x,this.y,0,0)},l.center.get=function(){return new c(this.x+this.width/2,this.y+this.height/2,0,0)},l.scalarLength.get=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.Equal=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},c.prototype.LimitByRectangle=function(t){var e=Math.min(Math.max(this.y,t.top),t.bottom),o=Math.min(Math.max(this.x,t.left),t.right);return new c(o,e,0,0)},Object.defineProperties(c.prototype,l);var f={DragAndDropUnit:i,rectBlz:c,GetClientRect:m};o.DragAndDropUnit=i,o.GetClientRect=m,o.default=f,o.rectBlz=c}),["cjs-chunk-9eab2df8.js","cjs-dom-utils-b1fad850.js","cjs-chunk-c4d681da.js","cjs-chunk-ac3aa63b.js"]);
