import"./esm-chunk-eaca7b99.js";import{EnsureElement as e,GetParentByClassName as t,AttachEventToElement as s,DetachEventFromElement as a}from"./esm-dom-utils-0302a1f6.js";import"./esm-chunk-5735fd9a.js";import{D as o,R as n}from"./esm-chunk-b0b509fc.js";import"./esm-chunk-95f7350d.js";import{AttachEventsForFocusHiding as r}from"./esm-focus-utils-295d95eb.js";function i(e,t){e&&(e.dataset.previousValue=t)}function l(i,l){i=e(i);var d=t(i,"dxbs-spin-edit");if(!i)return;o(i);let u=(c=l.decimalSeparator,f=l.needExponentialView,m=i,function(e){let t=m.dataset.selectionStartBeforePaste?m.value.trim():m.value,s=/^-?(\d)*$/;c&&(t=t.replace(/[.|,]/g,c),s=f?/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?([eE]?[+-]?(\d)*)?$/:/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?$/);let a=m.selectionStart,o=m.selectionEnd;s.test(t)?(m.value=t,m.dataset.previousValue=t):(m.dataset.selectionStartBeforePaste?(a=m.dataset.selectionStartBeforePaste,o=m.dataset.selectionEndBeforePaste):(a--,o+=m.dataset.previousValue.length-t.length),m.value=m.dataset.previousValue),m.dataset.selectionStartBeforePaste&&(m.removeAttribute("data-selection-start-before-paste"),m.removeAttribute("data-selection-end-before-paste")),m.selectionStart=a,m.selectionEnd=o});var c,f,m;let p=function(e){return function(t){e.dataset.selectionStartBeforePaste=e.selectionStart,e.dataset.selectionEndBeforePaste=e.selectionEnd}}(i);return s(i,"input",u),s(i,"paste",p),r(d),n(d,(function(){a(i,"input",u),a(i,"paste",p)})),Promise.resolve("ok")}function d(e,t){for(var s=document.activeElement;null!==s&&s!==e;)s=s.parentElement;null===s&&t.invokeMethodAsync("FocusLost")}function u(t){if(t=e(t))return o(t),Promise.resolve("ok")}const c={Init:l,Dispose:u,SetPreviousValue:i,CheckFocusedState:d};export default c;export{d as CheckFocusedState,u as Dispose,l as Init,i as SetPreviousValue};
